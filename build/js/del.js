'use strict';

$(document).ready(function () {
    $('.js-item-select-control--plus').on('click', function (e) {
        var select = $(this).closest('.js-item-select');
        var input = select.find('.item-select__input');
        var value = select.find('.item-select__value');
        var curentVal = parseInt(input.val());
        var count = parseInt(input.val()) + 1 + ' ' + 'м';

        input.removeAttr('style').val(count);

        if (curentVal > 0) {
            input.change();
        } else {
            input.val(1 + 'м');
        }

        value.children('.item-select__title').css('display', 'none');
        e.stopPropagation();
    });

    $('.js-item-select-control--minus').on('click', function () {
        var select = $(this).closest('.js-item-select');
        var input = select.find('.item-select__input');
        var value = select.find('.item-select__value');
        var curentVal = parseInt(input.val());
        var count = parseInt(input.val()) - 1 + ' ' + 'м';

        if (curentVal > 1) {
            count = count < 1 ? 1 : count;
            input.val(count);
            input.change();
            select.removeClass('is-close');
        } else {
            value.children('.item-select__title').removeAttr('style');
            input.css('display', 'none');
            select.removeClass('is-active');
        }
        return false;
    });

    //Search Hint
    if ($('.js-search-input').length > 0) {
        var searchInput = $('.js-search-input');
        searchInput.on('keyup', function () {
            var hint = $(this).closest('.js-search').find('.search__hint');
            if ($(this).val() !== '') {
                hint.removeAttr('style');
            } else {
                hint.css('display', 'none');
            }
        });
    }

    //Card Adress Map
    if ($('#contacts-map').length > 0) {
        var init = function init() {
            myMap = new ymaps.Map('contacts-map', {
                center: [55.73226853, 37.6209191],
                zoom: 16
            });

            myMap.behaviors.disable(['scrollZoom']);

            myMap.controls.remove('searchControl').remove('typeSelector').add('routeEditor');

            myPin = new ymaps.GeoObjectCollection({}, {
                iconLayout: 'default#image',
                iconImageHref: 'img/general/map-pin.svg',
                iconImageSize: [30, 42],
                iconImageOffset: [-3, -42]
            });

            myPlacemark = new ymaps.Placemark([55.73226853, 37.6209191], {
                balloonContentHeader: '<span class="map-pin__title">BAZAAR-TEX</span>',
                balloonContentBody: '<span class="map-pin__place">ул. Большая Полянка, 51А/9, Московский р-н</span>'
            });

            myPin.add(myPlacemark);
            myMap.geoObjects.add(myPin);
        };

        ymaps.ready(init);
        var myMap, myPlacemark, myPin;
    }

    //Price Slider
    if ($('.js-catalog-filter-item-price').length > 0) {
        var slider = document.getElementById('js-catalog-filter-slider');
        var allPriceStart = $('#js-catalog-filter-slider').data('start');
        var allPriceEnd = $('#js-catalog-filter-slider').data('end');
        var spans = [$('#jsPriceStart'), $('#jsPriceEnd')];
        var startPrice;
        var endPrice;

        if (spans[0].text() == '') {
            startPrice = allPriceStart;
        } else {
            startPrice = parseInt(spans[0].text());
        }

        if (spans[1].text() == '') {
            endPrice = allPriceEnd;
        } else {
            endPrice = parseInt(spans[1].text());
        }

        noUiSlider.create(slider, {
            start: [startPrice, endPrice],
            connect: true,
            range: {
                min: allPriceStart,
                max: allPriceEnd
            }
        });
        slider.noUiSlider.on('update', function (values, handle) {
            spans[handle].text(values[handle]);
        });
    }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm9uIiwiZSIsInNlbGVjdCIsImNsb3Nlc3QiLCJpbnB1dCIsImZpbmQiLCJ2YWx1ZSIsImN1cmVudFZhbCIsInBhcnNlSW50IiwidmFsIiwiY291bnQiLCJyZW1vdmVBdHRyIiwiY2hhbmdlIiwiY2hpbGRyZW4iLCJjc3MiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVDbGFzcyIsImxlbmd0aCIsInNlYXJjaElucHV0IiwiaGludCIsImluaXQiLCJteU1hcCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImJlaGF2aW9ycyIsImRpc2FibGUiLCJjb250cm9scyIsInJlbW92ZSIsImFkZCIsIm15UGluIiwiR2VvT2JqZWN0Q29sbGVjdGlvbiIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsIm15UGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiYmFsbG9vbkNvbnRlbnRIZWFkZXIiLCJiYWxsb29uQ29udGVudEJvZHkiLCJnZW9PYmplY3RzIiwic2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJhbGxQcmljZVN0YXJ0IiwiZGF0YSIsImFsbFByaWNlRW5kIiwic3BhbnMiLCJzdGFydFByaWNlIiwiZW5kUHJpY2UiLCJ0ZXh0Iiwibm9VaVNsaWRlciIsImNyZWF0ZSIsInN0YXJ0IiwiY29ubmVjdCIsInJhbmdlIiwibWluIiwibWF4IiwidmFsdWVzIiwiaGFuZGxlIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxFQUFFQyxRQUFGLEVBQVlDLEtBQVosQ0FBa0IsWUFBVztBQUN6QkYsTUFBRSwrQkFBRixFQUFtQ0csRUFBbkMsQ0FBc0MsT0FBdEMsRUFBK0MsVUFBU0MsQ0FBVCxFQUFZO0FBQ3ZELFlBQUlDLFNBQVNMLEVBQUUsSUFBRixFQUFRTSxPQUFSLENBQWdCLGlCQUFoQixDQUFiO0FBQ0EsWUFBSUMsUUFBUUYsT0FBT0csSUFBUCxDQUFZLHFCQUFaLENBQVo7QUFDQSxZQUFJQyxRQUFRSixPQUFPRyxJQUFQLENBQVkscUJBQVosQ0FBWjtBQUNBLFlBQUlFLFlBQVlDLFNBQVNKLE1BQU1LLEdBQU4sRUFBVCxDQUFoQjtBQUNBLFlBQUlDLFFBQVFGLFNBQVNKLE1BQU1LLEdBQU4sRUFBVCxJQUF3QixDQUF4QixHQUE0QixHQUE1QixHQUFrQyxHQUE5Qzs7QUFFQUwsY0FBTU8sVUFBTixDQUFpQixPQUFqQixFQUEwQkYsR0FBMUIsQ0FBOEJDLEtBQTlCOztBQUVBLFlBQUlILFlBQVksQ0FBaEIsRUFBbUI7QUFDZkgsa0JBQU1RLE1BQU47QUFDSCxTQUZELE1BRU87QUFDSFIsa0JBQU1LLEdBQU4sQ0FBVSxJQUFJLEdBQWQ7QUFDSDs7QUFFREgsY0FBTU8sUUFBTixDQUFlLHFCQUFmLEVBQXNDQyxHQUF0QyxDQUEwQyxTQUExQyxFQUFxRCxNQUFyRDtBQUNBYixVQUFFYyxlQUFGO0FBQ0gsS0FqQkQ7O0FBbUJBbEIsTUFBRSxnQ0FBRixFQUFvQ0csRUFBcEMsQ0FBdUMsT0FBdkMsRUFBZ0QsWUFBVztBQUN2RCxZQUFJRSxTQUFTTCxFQUFFLElBQUYsRUFBUU0sT0FBUixDQUFnQixpQkFBaEIsQ0FBYjtBQUNBLFlBQUlDLFFBQVFGLE9BQU9HLElBQVAsQ0FBWSxxQkFBWixDQUFaO0FBQ0EsWUFBSUMsUUFBUUosT0FBT0csSUFBUCxDQUFZLHFCQUFaLENBQVo7QUFDQSxZQUFJRSxZQUFZQyxTQUFTSixNQUFNSyxHQUFOLEVBQVQsQ0FBaEI7QUFDQSxZQUFJQyxRQUFRRixTQUFTSixNQUFNSyxHQUFOLEVBQVQsSUFBd0IsQ0FBeEIsR0FBNEIsR0FBNUIsR0FBa0MsR0FBOUM7O0FBRUEsWUFBSUYsWUFBWSxDQUFoQixFQUFtQjtBQUNmRyxvQkFBUUEsUUFBUSxDQUFSLEdBQVksQ0FBWixHQUFnQkEsS0FBeEI7QUFDQU4sa0JBQU1LLEdBQU4sQ0FBVUMsS0FBVjtBQUNBTixrQkFBTVEsTUFBTjtBQUNBVixtQkFBT2MsV0FBUCxDQUFtQixVQUFuQjtBQUNILFNBTEQsTUFLTztBQUNIVixrQkFBTU8sUUFBTixDQUFlLHFCQUFmLEVBQXNDRixVQUF0QyxDQUFpRCxPQUFqRDtBQUNBUCxrQkFBTVUsR0FBTixDQUFVLFNBQVYsRUFBcUIsTUFBckI7QUFDQVosbUJBQU9jLFdBQVAsQ0FBbUIsV0FBbkI7QUFDSDtBQUNELGVBQU8sS0FBUDtBQUNILEtBbEJEOztBQW9CQTtBQUNBLFFBQUluQixFQUFFLGtCQUFGLEVBQXNCb0IsTUFBdEIsR0FBK0IsQ0FBbkMsRUFBc0M7QUFDbEMsWUFBSUMsY0FBY3JCLEVBQUUsa0JBQUYsQ0FBbEI7QUFDQXFCLG9CQUFZbEIsRUFBWixDQUFlLE9BQWYsRUFBd0IsWUFBVztBQUMvQixnQkFBSW1CLE9BQU90QixFQUFFLElBQUYsRUFDTk0sT0FETSxDQUNFLFlBREYsRUFFTkUsSUFGTSxDQUVELGVBRkMsQ0FBWDtBQUdBLGdCQUFJUixFQUFFLElBQUYsRUFBUVksR0FBUixPQUFrQixFQUF0QixFQUEwQjtBQUN0QlUscUJBQUtSLFVBQUwsQ0FBZ0IsT0FBaEI7QUFDSCxhQUZELE1BRU87QUFDSFEscUJBQUtMLEdBQUwsQ0FBUyxTQUFULEVBQW9CLE1BQXBCO0FBQ0g7QUFDSixTQVREO0FBVUg7O0FBRUQ7QUFDQSxRQUFJakIsRUFBRSxlQUFGLEVBQW1Cb0IsTUFBbkIsR0FBNEIsQ0FBaEMsRUFBbUM7QUFBQSxZQUl0QkcsSUFKc0IsR0FJL0IsU0FBU0EsSUFBVCxHQUFnQjtBQUNaQyxvQkFBUSxJQUFJQyxNQUFNQyxHQUFWLENBQWMsY0FBZCxFQUE4QjtBQUNsQ0Msd0JBQVEsQ0FBQyxXQUFELEVBQWMsVUFBZCxDQUQwQjtBQUVsQ0Msc0JBQU07QUFGNEIsYUFBOUIsQ0FBUjs7QUFLQUosa0JBQU1LLFNBQU4sQ0FBZ0JDLE9BQWhCLENBQXdCLENBQUMsWUFBRCxDQUF4Qjs7QUFFQU4sa0JBQU1PLFFBQU4sQ0FDS0MsTUFETCxDQUNZLGVBRFosRUFFS0EsTUFGTCxDQUVZLGNBRlosRUFHS0MsR0FITCxDQUdTLGFBSFQ7O0FBS0FDLG9CQUFRLElBQUlULE1BQU1VLG1CQUFWLENBQ0osRUFESSxFQUVKO0FBQ0lDLDRCQUFZLGVBRGhCO0FBRUlDLCtCQUFlLHlCQUZuQjtBQUdJQywrQkFBZSxDQUFDLEVBQUQsRUFBSyxFQUFMLENBSG5CO0FBSUlDLGlDQUFpQixDQUFDLENBQUMsQ0FBRixFQUFLLENBQUMsRUFBTjtBQUpyQixhQUZJLENBQVI7O0FBVUFDLDBCQUFjLElBQUlmLE1BQU1nQixTQUFWLENBQW9CLENBQUMsV0FBRCxFQUFjLFVBQWQsQ0FBcEIsRUFBK0M7QUFDekRDLHNDQUNJLGdEQUZxRDtBQUd6REMsb0NBQ0k7QUFKcUQsYUFBL0MsQ0FBZDs7QUFPQVQsa0JBQU1ELEdBQU4sQ0FBVU8sV0FBVjtBQUNBaEIsa0JBQU1vQixVQUFOLENBQWlCWCxHQUFqQixDQUFxQkMsS0FBckI7QUFDSCxTQXBDOEI7O0FBQy9CVCxjQUFNdkIsS0FBTixDQUFZcUIsSUFBWjtBQUNBLFlBQUlDLEtBQUosRUFBV2dCLFdBQVgsRUFBd0JOLEtBQXhCO0FBbUNIOztBQUVEO0FBQ0EsUUFBSWxDLEVBQUUsK0JBQUYsRUFBbUNvQixNQUFuQyxHQUE0QyxDQUFoRCxFQUFtRDtBQUMvQyxZQUFJeUIsU0FBUzVDLFNBQVM2QyxjQUFULENBQXdCLDBCQUF4QixDQUFiO0FBQ0EsWUFBSUMsZ0JBQWdCL0MsRUFBRSwyQkFBRixFQUErQmdELElBQS9CLENBQW9DLE9BQXBDLENBQXBCO0FBQ0EsWUFBSUMsY0FBY2pELEVBQUUsMkJBQUYsRUFBK0JnRCxJQUEvQixDQUFvQyxLQUFwQyxDQUFsQjtBQUNBLFlBQUlFLFFBQVEsQ0FBQ2xELEVBQUUsZUFBRixDQUFELEVBQXFCQSxFQUFFLGFBQUYsQ0FBckIsQ0FBWjtBQUNBLFlBQUltRCxVQUFKO0FBQ0EsWUFBSUMsUUFBSjs7QUFFQSxZQUFJRixNQUFNLENBQU4sRUFBU0csSUFBVCxNQUFtQixFQUF2QixFQUEyQjtBQUN2QkYseUJBQWFKLGFBQWI7QUFDSCxTQUZELE1BRU87QUFDSEkseUJBQWF4QyxTQUFTdUMsTUFBTSxDQUFOLEVBQVNHLElBQVQsRUFBVCxDQUFiO0FBQ0g7O0FBRUQsWUFBSUgsTUFBTSxDQUFOLEVBQVNHLElBQVQsTUFBbUIsRUFBdkIsRUFBMkI7QUFDdkJELHVCQUFXSCxXQUFYO0FBQ0gsU0FGRCxNQUVPO0FBQ0hHLHVCQUFXekMsU0FBU3VDLE1BQU0sQ0FBTixFQUFTRyxJQUFULEVBQVQsQ0FBWDtBQUNIOztBQUVEQyxtQkFBV0MsTUFBWCxDQUFrQlYsTUFBbEIsRUFBMEI7QUFDdEJXLG1CQUFPLENBQUNMLFVBQUQsRUFBYUMsUUFBYixDQURlO0FBRXRCSyxxQkFBUyxJQUZhO0FBR3RCQyxtQkFBTztBQUNIQyxxQkFBS1osYUFERjtBQUVIYSxxQkFBS1g7QUFGRjtBQUhlLFNBQTFCO0FBUUFKLGVBQU9TLFVBQVAsQ0FBa0JuRCxFQUFsQixDQUFxQixRQUFyQixFQUErQixVQUFTMEQsTUFBVCxFQUFpQkMsTUFBakIsRUFBeUI7QUFDcERaLGtCQUFNWSxNQUFOLEVBQWNULElBQWQsQ0FBbUJRLE9BQU9DLE1BQVAsQ0FBbkI7QUFDSCxTQUZEO0FBR0g7QUFDSixDQWhJRCIsImZpbGUiOiJkZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAkKCcuanMtaXRlbS1zZWxlY3QtY29udHJvbC0tcGx1cycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGV0IHNlbGVjdCA9ICQodGhpcykuY2xvc2VzdCgnLmpzLWl0ZW0tc2VsZWN0Jyk7XG4gICAgICAgIGxldCBpbnB1dCA9IHNlbGVjdC5maW5kKCcuaXRlbS1zZWxlY3RfX2lucHV0Jyk7XG4gICAgICAgIGxldCB2YWx1ZSA9IHNlbGVjdC5maW5kKCcuaXRlbS1zZWxlY3RfX3ZhbHVlJyk7XG4gICAgICAgIGxldCBjdXJlbnRWYWwgPSBwYXJzZUludChpbnB1dC52YWwoKSk7XG4gICAgICAgIGxldCBjb3VudCA9IHBhcnNlSW50KGlucHV0LnZhbCgpKSArIDEgKyAnICcgKyAn0LwnO1xuXG4gICAgICAgIGlucHV0LnJlbW92ZUF0dHIoJ3N0eWxlJykudmFsKGNvdW50KTtcblxuICAgICAgICBpZiAoY3VyZW50VmFsID4gMCkge1xuICAgICAgICAgICAgaW5wdXQuY2hhbmdlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbnB1dC52YWwoMSArICfQvCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsdWUuY2hpbGRyZW4oJy5pdGVtLXNlbGVjdF9fdGl0bGUnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuXG4gICAgJCgnLmpzLWl0ZW0tc2VsZWN0LWNvbnRyb2wtLW1pbnVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGxldCBzZWxlY3QgPSAkKHRoaXMpLmNsb3Nlc3QoJy5qcy1pdGVtLXNlbGVjdCcpO1xuICAgICAgICBsZXQgaW5wdXQgPSBzZWxlY3QuZmluZCgnLml0ZW0tc2VsZWN0X19pbnB1dCcpO1xuICAgICAgICBsZXQgdmFsdWUgPSBzZWxlY3QuZmluZCgnLml0ZW0tc2VsZWN0X192YWx1ZScpO1xuICAgICAgICBsZXQgY3VyZW50VmFsID0gcGFyc2VJbnQoaW5wdXQudmFsKCkpO1xuICAgICAgICBsZXQgY291bnQgPSBwYXJzZUludChpbnB1dC52YWwoKSkgLSAxICsgJyAnICsgJ9C8JztcblxuICAgICAgICBpZiAoY3VyZW50VmFsID4gMSkge1xuICAgICAgICAgICAgY291bnQgPSBjb3VudCA8IDEgPyAxIDogY291bnQ7XG4gICAgICAgICAgICBpbnB1dC52YWwoY291bnQpO1xuICAgICAgICAgICAgaW5wdXQuY2hhbmdlKCk7XG4gICAgICAgICAgICBzZWxlY3QucmVtb3ZlQ2xhc3MoJ2lzLWNsb3NlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZS5jaGlsZHJlbignLml0ZW0tc2VsZWN0X190aXRsZScpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICBpbnB1dC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgc2VsZWN0LnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvL1NlYXJjaCBIaW50XG4gICAgaWYgKCQoJy5qcy1zZWFyY2gtaW5wdXQnKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBzZWFyY2hJbnB1dCA9ICQoJy5qcy1zZWFyY2gtaW5wdXQnKTtcbiAgICAgICAgc2VhcmNoSW5wdXQub24oJ2tleXVwJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgaGludCA9ICQodGhpcylcbiAgICAgICAgICAgICAgICAuY2xvc2VzdCgnLmpzLXNlYXJjaCcpXG4gICAgICAgICAgICAgICAgLmZpbmQoJy5zZWFyY2hfX2hpbnQnKTtcbiAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGhpbnQucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaGludC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvL0NhcmQgQWRyZXNzIE1hcFxuICAgIGlmICgkKCcjY29udGFjdHMtbWFwJykubGVuZ3RoID4gMCkge1xuICAgICAgICB5bWFwcy5yZWFkeShpbml0KTtcbiAgICAgICAgdmFyIG15TWFwLCBteVBsYWNlbWFyaywgbXlQaW47XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIG15TWFwID0gbmV3IHltYXBzLk1hcCgnY29udGFjdHMtbWFwJywge1xuICAgICAgICAgICAgICAgIGNlbnRlcjogWzU1LjczMjI2ODUzLCAzNy42MjA5MTkxXSxcbiAgICAgICAgICAgICAgICB6b29tOiAxNlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKFsnc2Nyb2xsWm9vbSddKTtcblxuICAgICAgICAgICAgbXlNYXAuY29udHJvbHNcbiAgICAgICAgICAgICAgICAucmVtb3ZlKCdzZWFyY2hDb250cm9sJylcbiAgICAgICAgICAgICAgICAucmVtb3ZlKCd0eXBlU2VsZWN0b3InKVxuICAgICAgICAgICAgICAgIC5hZGQoJ3JvdXRlRWRpdG9yJyk7XG5cbiAgICAgICAgICAgIG15UGluID0gbmV3IHltYXBzLkdlb09iamVjdENvbGxlY3Rpb24oXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpY29uTGF5b3V0OiAnZGVmYXVsdCNpbWFnZScsXG4gICAgICAgICAgICAgICAgICAgIGljb25JbWFnZUhyZWY6ICdpbWcvZ2VuZXJhbC9tYXAtcGluLnN2ZycsXG4gICAgICAgICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFszMCwgNDJdLFxuICAgICAgICAgICAgICAgICAgICBpY29uSW1hZ2VPZmZzZXQ6IFstMywgLTQyXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIG15UGxhY2VtYXJrID0gbmV3IHltYXBzLlBsYWNlbWFyayhbNTUuNzMyMjY4NTMsIDM3LjYyMDkxOTFdLCB7XG4gICAgICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnRIZWFkZXI6XG4gICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cIm1hcC1waW5fX3RpdGxlXCI+QkFaQUFSLVRFWDwvc3Bhbj4nLFxuICAgICAgICAgICAgICAgIGJhbGxvb25Db250ZW50Qm9keTpcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwibWFwLXBpbl9fcGxhY2VcIj7Rg9C7LiDQkdC+0LvRjNGI0LDRjyDQn9C+0LvRj9C90LrQsCwgNTHQkC85LCDQnNC+0YHQutC+0LLRgdC60LjQuSDRgC3QvTwvc3Bhbj4nXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbXlQaW4uYWRkKG15UGxhY2VtYXJrKTtcbiAgICAgICAgICAgIG15TWFwLmdlb09iamVjdHMuYWRkKG15UGluKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vUHJpY2UgU2xpZGVyXG4gICAgaWYgKCQoJy5qcy1jYXRhbG9nLWZpbHRlci1pdGVtLXByaWNlJykubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgc2xpZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pzLWNhdGFsb2ctZmlsdGVyLXNsaWRlcicpO1xuICAgICAgICB2YXIgYWxsUHJpY2VTdGFydCA9ICQoJyNqcy1jYXRhbG9nLWZpbHRlci1zbGlkZXInKS5kYXRhKCdzdGFydCcpO1xuICAgICAgICB2YXIgYWxsUHJpY2VFbmQgPSAkKCcjanMtY2F0YWxvZy1maWx0ZXItc2xpZGVyJykuZGF0YSgnZW5kJyk7XG4gICAgICAgIHZhciBzcGFucyA9IFskKCcjanNQcmljZVN0YXJ0JyksICQoJyNqc1ByaWNlRW5kJyldO1xuICAgICAgICB2YXIgc3RhcnRQcmljZTtcbiAgICAgICAgdmFyIGVuZFByaWNlO1xuXG4gICAgICAgIGlmIChzcGFuc1swXS50ZXh0KCkgPT0gJycpIHtcbiAgICAgICAgICAgIHN0YXJ0UHJpY2UgPSBhbGxQcmljZVN0YXJ0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3RhcnRQcmljZSA9IHBhcnNlSW50KHNwYW5zWzBdLnRleHQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3BhbnNbMV0udGV4dCgpID09ICcnKSB7XG4gICAgICAgICAgICBlbmRQcmljZSA9IGFsbFByaWNlRW5kO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZW5kUHJpY2UgPSBwYXJzZUludChzcGFuc1sxXS50ZXh0KCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyLCB7XG4gICAgICAgICAgICBzdGFydDogW3N0YXJ0UHJpY2UsIGVuZFByaWNlXSxcbiAgICAgICAgICAgIGNvbm5lY3Q6IHRydWUsXG4gICAgICAgICAgICByYW5nZToge1xuICAgICAgICAgICAgICAgIG1pbjogYWxsUHJpY2VTdGFydCxcbiAgICAgICAgICAgICAgICBtYXg6IGFsbFByaWNlRW5kXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzbGlkZXIubm9VaVNsaWRlci5vbigndXBkYXRlJywgZnVuY3Rpb24odmFsdWVzLCBoYW5kbGUpIHtcbiAgICAgICAgICAgIHNwYW5zW2hhbmRsZV0udGV4dCh2YWx1ZXNbaGFuZGxlXSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuIl19
