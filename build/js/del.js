'use strict';

$(document).ready(function () {
    $('.js-item-select-control--plus').on('click', function (e) {
        var select = $(this).closest('.js-item-select');
        var input = select.find('.item-select__input');
        var value = select.find('.item-select__value');
        var curentVal = parseInt(input.val());
        var count = parseInt(input.val()) + 1 + ' ' + 'м';

        input.removeAttr('style').val(count);

        if (curentVal > 0) {
            input.change();
        } else {
            input.val(1 + 'м');
        }

        value.children('.item-select__title').css('display', 'none');
        e.stopPropagation();
    });

    $('.js-item-select-control--minus').on('click', function () {
        var select = $(this).closest('.js-item-select');
        var input = select.find('.item-select__input');
        var value = select.find('.item-select__value');
        var curentVal = parseInt(input.val());
        var count = parseInt(input.val()) - 1 + ' ' + 'м';

        if (curentVal > 1) {
            count = count < 1 ? 1 : count;
            input.val(count);
            input.change();
            select.removeClass('is-close');
        } else {
            value.children('.item-select__title').removeAttr('style');
            input.css('display', 'none');
            select.removeClass('is-active');
        }
        return false;
    });

    //Search Hint
    if ($('.js-search-input').length > 0) {
        var searchInput = $('.js-search-input');
        searchInput.on('keyup', function () {
            var hint = $(this).closest('.js-search').find('.search__hint');
            if ($(this).val() !== '') {
                hint.removeAttr('style');
            } else {
                hint.css('display', 'none');
            }
        });
    }

    //Card Adress Map
    if ($('#contacts-map').length > 0) {
        var init = function init() {
            myMap = new ymaps.Map('contacts-map', {
                center: [55.73226853, 37.6209191],
                zoom: 16
            });

            myMap.behaviors.disable(['scrollZoom']);

            myMap.controls.remove('searchControl').remove('typeSelector').add('routeEditor');

            myPin = new ymaps.GeoObjectCollection({}, {
                iconLayout: 'default#image',
                iconImageHref: 'img/general/map-pin.svg',
                iconImageSize: [30, 42],
                iconImageOffset: [-3, -42]
            });

            myPlacemark = new ymaps.Placemark([55.73226853, 37.6209191], {
                balloonContentHeader: '<span class="map-pin__title">BAZAAR-TEX</span>',
                balloonContentBody: '<span class="map-pin__place">ул. Большая Полянка, 51А/9, Московский р-н</span>'
            });

            myPin.add(myPlacemark);
            myMap.geoObjects.add(myPin);
        };

        ymaps.ready(init);
        var myMap, myPlacemark, myPin;
    }

    //Price Slider
    if ($('.js-catalog-filter-item-price').length > 0) {
        var slider = document.getElementById('js-catalog-filter-slider');
        var allPriceStart = $('#js-catalog-filter-slider').data('start');
        var allPriceEnd = $('#js-catalog-filter-slider').data('end');
        var spans = [$('#jsPriceStart'), $('#jsPriceEnd')];
        var startPrice;
        var endPrice;

        if (spans[0].text() == '') {
            startPrice = allPriceStart;
        } else {
            startPrice = parseInt(spans[0].text());
        }

        if (spans[1].text() == '') {
            endPrice = allPriceEnd;
        } else {
            endPrice = parseInt(spans[1].text());
        }

        noUiSlider.create(slider, {
            start: [startPrice, endPrice],
            connect: true,
            range: {
                min: allPriceStart,
                max: allPriceEnd
            }
        });
        slider.noUiSlider.on('update', function (values, handle) {
            spans[handle].text(values[handle]);
        });
    }
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlbC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIm9uIiwiZSIsInNlbGVjdCIsImNsb3Nlc3QiLCJpbnB1dCIsImZpbmQiLCJ2YWx1ZSIsImN1cmVudFZhbCIsInBhcnNlSW50IiwidmFsIiwiY291bnQiLCJyZW1vdmVBdHRyIiwiY2hhbmdlIiwiY2hpbGRyZW4iLCJjc3MiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmVDbGFzcyIsImxlbmd0aCIsInNlYXJjaElucHV0IiwiaGludCIsImluaXQiLCJteU1hcCIsInltYXBzIiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImJlaGF2aW9ycyIsImRpc2FibGUiLCJjb250cm9scyIsInJlbW92ZSIsImFkZCIsIm15UGluIiwiR2VvT2JqZWN0Q29sbGVjdGlvbiIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsIm15UGxhY2VtYXJrIiwiUGxhY2VtYXJrIiwiYmFsbG9vbkNvbnRlbnRIZWFkZXIiLCJiYWxsb29uQ29udGVudEJvZHkiLCJnZW9PYmplY3RzIiwic2xpZGVyIiwiZ2V0RWxlbWVudEJ5SWQiLCJhbGxQcmljZVN0YXJ0IiwiZGF0YSIsImFsbFByaWNlRW5kIiwic3BhbnMiLCJzdGFydFByaWNlIiwiZW5kUHJpY2UiLCJ0ZXh0Iiwibm9VaVNsaWRlciIsImNyZWF0ZSIsInN0YXJ0IiwiY29ubmVjdCIsInJhbmdlIiwibWluIiwibWF4IiwidmFsdWVzIiwiaGFuZGxlIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxFQUFFQyxRQUFGLEVBQVlDLEtBQVosQ0FBa0IsWUFBVztBQUN6QkYsTUFBRSwrQkFBRixFQUFtQ0csRUFBbkMsQ0FBc0MsT0FBdEMsRUFBK0MsVUFBU0MsQ0FBVCxFQUFZO0FBQ3ZELFlBQUlDLFNBQVNMLEVBQUUsSUFBRixFQUFRTSxPQUFSLENBQWdCLGlCQUFoQixDQUFiO0FBQ0EsWUFBSUMsUUFBUUYsT0FB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QWF4QyxTQUFTdUMsTUFBTSxDQUFOLEVBQVNHLElBQVQsRUFBVCxDQUFiO0FBQ0g7O0FBRUQsWUFBSUgsTUFBTSxDQUFOLEVBQVNHLElBQVQsTUFBbUIsRUFBdkIsRUFBMkI7QUFDdkJELHVCQUFXSCxXQUFYO0FBQ0gsU0FGRCxNQUVPO0FBQ0hHLHVCQUFXekMsU0FBU3VDLE1BQU0sQ0FBTixFQUFTRyxJQUFULEVBQVQsQ0FBWDtBQUNIOztBQUVEQyxtQkFBV0MsTUFBWCxDQUFrQlYsTUFBbEIsRUFBMEI7QUFDdEJXLG1CQUFPLENBQUNMLFVBQUQsRUFBYUMsUUFBYixDQURlO0FBRXRCSyxxQkFBUyxJQUZhO0FBR3RCQyxtQkFBTztBQUNIQyxxQkFBS1osYUFERjtBQUVIYSxxQkFBS1g7QUFGRjtBQUhlLFNBQTFCO0FBUUFKLGVBQU9TLFVBQVAsQ0FBa0JuRCxFQUFsQixDQUFxQixRQUFyQixFQUErQixVQUFTMEQsTUFBVCxFQUFpQkMsTUFBakIsRUFBeUI7QUFDcERaLGtCQUFNWSxNQUFOLEVBQWNULElBQWQsQ0FBbUJRLE9BQU9DLE1BQVAsQ0FBbkI7QUFDSCxTQUZEO0FBR0g7QUFDSixDQWhJRCIsImZpbGUiOiJkZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgICQoJy5qcy1pdGVtLXNlbGVjdC1jb250cm9sLS1wbHVzJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIGxldCBzZWxlY3QgPSAkKHRoaXMpLmNsb3Nlc3QoJy5qcy1pdGVtLXNlbGVjdCcpO1xyXG4gICAgICAgIGxldCBpbnB1dCA9IHNlbGVjdC5maW5kKCcuaXRlbS1zZWxlY3RfX2lucHV0Jyk7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gc2VsZWN0LmZpbmQoJy5pdGVtLXNlbGVjdF9fdmFsdWUnKTtcclxuICAgICAgICBsZXQgY3VyZW50VmFsID0gcGFyc2VJbnQoaW5wdXQudmFsKCkpO1xyXG4gICAgICAgIGxldCBjb3VudCA9IHBhcnNlSW50KGlucHV0LnZhbCgpKSArIDEgKyAnICcgKyAn0LwnO1xyXG5cclxuICAgICAgICBpbnB1dC5yZW1vdmVBdHRyKCdzdHlsZScpLnZhbChjb3VudCk7XHJcblxyXG4gICAgICAgIGlmIChjdXJlbnRWYWwgPiAwKSB7XHJcbiAgICAgICAgICAgIGlucHV0LmNoYW5nZSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbCgxICsgJ9C8Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YWx1ZS5jaGlsZHJlbignLml0ZW0tc2VsZWN0X190aXRsZScpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5qcy1pdGVtLXNlbGVjdC1jb250cm9sLS1taW51cycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCBzZWxlY3QgPSAkKHRoaXMpLmNsb3Nlc3QoJy5qcy1pdGVtLXNlbGVjdCcpO1xyXG4gICAgICAgIGxldCBpbnB1dCA9IHNlbGVjdC5maW5kKCcuaXRlbS1zZWxlY3RfX2lucHV0Jyk7XHJcbiAgICAgICAgbGV0IHZhbHVlID0gc2VsZWN0LmZpbmQoJy5pdGVtLXNlbGVjdF9fdmFsdWUnKTtcclxuICAgICAgICBsZXQgY3VyZW50VmFsID0gcGFyc2VJbnQoaW5wdXQudmFsKCkpO1xyXG4gICAgICAgIGxldCBjb3VudCA9IHBhcnNlSW50KGlucHV0LnZhbCgpKSAtIDEgKyAnICcgKyAn0LwnO1xyXG5cclxuICAgICAgICBpZiAoY3VyZW50VmFsID4gMSkge1xyXG4gICAgICAgICAgICBjb3VudCA9IGNvdW50IDwgMSA/IDEgOiBjb3VudDtcclxuICAgICAgICAgICAgaW5wdXQudmFsKGNvdW50KTtcclxuICAgICAgICAgICAgaW5wdXQuY2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHNlbGVjdC5yZW1vdmVDbGFzcygnaXMtY2xvc2UnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB2YWx1ZS5jaGlsZHJlbignLml0ZW0tc2VsZWN0X190aXRsZScpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XHJcbiAgICAgICAgICAgIGlucHV0LmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbiAgICAgICAgICAgIHNlbGVjdC5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vU2VhcmNoIEhpbnRcclxuICAgIGlmICgkKCcuanMtc2VhcmNoLWlucHV0JykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciBzZWFyY2hJbnB1dCA9ICQoJy5qcy1zZWFyY2gtaW5wdXQnKTtcclxuICAgICAgICBzZWFyY2hJbnB1dC5vbigna2V5dXAnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGhpbnQgPSAkKHRoaXMpXHJcbiAgICAgICAgICAgICAgICAuY2xvc2VzdCgnLmpzLXNlYXJjaCcpXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLnNlYXJjaF9faGludCcpO1xyXG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGhpbnQucmVtb3ZlQXR0cignc3R5bGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhpbnQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vQ2FyZCBBZHJlc3MgTWFwXHJcbiAgICBpZiAoJCgnI2NvbnRhY3RzLW1hcCcpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICB5bWFwcy5yZWFkeShpbml0KTtcclxuICAgICAgICB2YXIgbXlNYXAsIG15UGxhY2VtYXJrLCBteVBpbjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKCdjb250YWN0cy1tYXAnLCB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IFs1NS43MzIyNjg1MywgMzcuNjIwOTE5MV0sXHJcbiAgICAgICAgICAgICAgICB6b29tOiAxNlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG15TWFwLmJlaGF2aW9ycy5kaXNhYmxlKFsnc2Nyb2xsWm9vbSddKTtcclxuXHJcbiAgICAgICAgICAgIG15TWFwLmNvbnRyb2xzXHJcbiAgICAgICAgICAgICAgICAucmVtb3ZlKCdzZWFyY2hDb250cm9sJylcclxuICAgICAgICAgICAgICAgIC5yZW1vdmUoJ3R5cGVTZWxlY3RvcicpXHJcbiAgICAgICAgICAgICAgICAuYWRkKCdyb3V0ZUVkaXRvcicpO1xyXG5cclxuICAgICAgICAgICAgbXlQaW4gPSBuZXcgeW1hcHMuR2VvT2JqZWN0Q29sbGVjdGlvbihcclxuICAgICAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcclxuICAgICAgICAgICAgICAgICAgICBpY29uSW1hZ2VIcmVmOiAnaW1nL2dlbmVyYWwvbWFwLXBpbi5zdmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb25JbWFnZVNpemU6IFszMCwgNDJdLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb25JbWFnZU9mZnNldDogWy0zLCAtNDJdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBteVBsYWNlbWFyayA9IG5ldyB5bWFwcy5QbGFjZW1hcmsoWzU1LjczMjI2ODUzLCAzNy42MjA5MTkxXSwge1xyXG4gICAgICAgICAgICAgICAgYmFsbG9vbkNvbnRlbnRIZWFkZXI6XHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwibWFwLXBpbl9fdGl0bGVcIj5CQVpBQVItVEVYPC9zcGFuPicsXHJcbiAgICAgICAgICAgICAgICBiYWxsb29uQ29udGVudEJvZHk6XHJcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwibWFwLXBpbl9fcGxhY2VcIj7Rg9C7LiDQkdC+0LvRjNGI0LDRjyDQn9C+0LvRj9C90LrQsCwgNTHQkC85LCDQnNC+0YHQutC+0LLRgdC60LjQuSDRgC3QvTwvc3Bhbj4nXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbXlQaW4uYWRkKG15UGxhY2VtYXJrKTtcclxuICAgICAgICAgICAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlQaW4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL1ByaWNlIFNsaWRlclxyXG4gICAgaWYgKCQoJy5qcy1jYXRhbG9nLWZpbHRlci1pdGVtLXByaWNlJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciBzbGlkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnanMtY2F0YWxvZy1maWx0ZXItc2xpZGVyJyk7XHJcbiAgICAgICAgdmFyIGFsbFByaWNlU3RhcnQgPSAkKCcjanMtY2F0YWxvZy1maWx0ZXItc2xpZGVyJykuZGF0YSgnc3RhcnQnKTtcclxuICAgICAgICB2YXIgYWxsUHJpY2VFbmQgPSAkKCcjanMtY2F0YWxvZy1maWx0ZXItc2xpZGVyJykuZGF0YSgnZW5kJyk7XHJcbiAgICAgICAgdmFyIHNwYW5zID0gWyQoJyNqc1ByaWNlU3RhcnQnKSwgJCgnI2pzUHJpY2VFbmQnKV07XHJcbiAgICAgICAgdmFyIHN0YXJ0UHJpY2U7XHJcbiAgICAgICAgdmFyIGVuZFByaWNlO1xyXG5cclxuICAgICAgICBpZiAoc3BhbnNbMF0udGV4dCgpID09ICcnKSB7XHJcbiAgICAgICAgICAgIHN0YXJ0UHJpY2UgPSBhbGxQcmljZVN0YXJ0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0YXJ0UHJpY2UgPSBwYXJzZUludChzcGFuc1swXS50ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNwYW5zWzFdLnRleHQoKSA9PSAnJykge1xyXG4gICAgICAgICAgICBlbmRQcmljZSA9IGFsbFByaWNlRW5kO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVuZFByaWNlID0gcGFyc2VJbnQoc3BhbnNbMV0udGV4dCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5vVWlTbGlkZXIuY3JlYXRlKHNsaWRlciwge1xyXG4gICAgICAgICAgICBzdGFydDogW3N0YXJ0UHJpY2UsIGVuZFByaWNlXSxcclxuICAgICAgICAgICAgY29ubmVjdDogdHJ1ZSxcclxuICAgICAgICAgICAgcmFuZ2U6IHtcclxuICAgICAgICAgICAgICAgIG1pbjogYWxsUHJpY2VTdGFydCxcclxuICAgICAgICAgICAgICAgIG1heDogYWxsUHJpY2VFbmRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNsaWRlci5ub1VpU2xpZGVyLm9uKCd1cGRhdGUnLCBmdW5jdGlvbih2YWx1ZXMsIGhhbmRsZSkge1xyXG4gICAgICAgICAgICBzcGFuc1toYW5kbGVdLnRleHQodmFsdWVzW2hhbmRsZV0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuIl19
